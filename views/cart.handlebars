<h1>Carrito {{cart._id}}</h1>

{{#if cart.products.length}}
  {{#each cart.products}}
    <div style="margin-bottom:15px;">
      <b>{{this.product.title}}</b>
      - ${{this.product.price}}
      - Cantidad: {{this.quantity}}

      <button onclick="removeItem('{{../cart._id}}','{{this.product._id}}')">
        Eliminar
      </button>
    </div>
  {{/each}}

  <button onclick="clearCart('{{cart._id}}')">
    Vaciar carrito
  </button>
{{else}}
  <p>Carrito vac√≠o</p>
{{/if}}

<a href="/products?cartId={{cart._id}}">Ir a productos</a>

<script>
async function removeItem(cid, pid) {
  await fetch(`/api/carts/${cid}/products/${pid}`, { method: "DELETE" });
  location.reload();
}

async function clearCart(cid) {
  await fetch(`/api/carts/${cid}`, { method: "DELETE" });
  location.reload();
}
</script>